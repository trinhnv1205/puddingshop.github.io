@page "/"
@using MudBlazor
@inject ISnackbar _snackbar
@inject IDialogService _dialogService
<PageTitle>Index</PageTitle>

<MudContainer>
    <MudText Typo="Typo.h3" GutterBottom="true">Home</MudText>
    <MudText Class="mb-8">
        MudBlazor is an ambitious Material Design component framework for Blazor with an emphasis on
        ease of use and clear structure. It is perfect for .NET developers who want to rapidly build web
        applications without having to struggle with CSS and Javascript.
    </MudText>
    @if(Datas.Count > 0){
        <MudGrid>
        @foreach (var item in Datas)
        {
            <MudItem xs="12" sm="6" md="4" lg="3" xl="2">
                <MudCard>
                    <MudCardHeader>
                        <MudText Typo="Typo.h6" Variant="Variant.h6">MudBlazor</MudText>
                        <MudSpacer />
                        @* if odd is red else even is none *@
                        <MudIconButton Icon="@Icons.Material.Filled.Favorite"
                            Color="item.IsFavorite ? Color.Primary : Color.Default" OnClick="()=> Favorite(item.Id)" />
                    </MudCardHeader>
                    @* <MudCardMedia> *@
                    @* <MudImage Src="https://via.placeholder.com/300x200" alt="placeholder" /> *@
                    @* </MudCardMedia> *@
                    <MudCardContent>
                        <MudText Typo="Typo.body2" Variant="Variant.body2">
                            MudBlazor is an ambitious Material Design component framework for Blazor with an emphasis on
                            ease of use and clear structure. It is perfect for .NET developers who want to rapidly build web
                            applications without having to struggle with CSS and Javascript.
                        </MudText>
                    </MudCardContent>
                    <MudCardActions>
                        <MudButton Color="Color.Primary">Learn More</MudButton>
                        <MudSpacer />
                        <MudIconButton Icon="@Icons.Material.Filled.Share" Color="item.IsShared ? Color.Primary : Color.Default" OnClick="()=> Share(item.Id)" />
                    </MudCardActions>
                </MudCard>
            </MudItem>
        }
    </MudGrid>
    }else {
        <MudText Typo="Typo.h6" Variant="Variant.h6">No Data</MudText>
    }
</MudContainer>

@code {
    public static List<Post> Datas { get; set; } = CreateData(12);

    public async Task OnInitializedAsync()
    {
        await Task.CompletedTask;
    }

    @* when click Favorite will be show snackbar *@
    private async Task Favorite(int id)
    {
        var data = Datas.FirstOrDefault(x => x.Id == id);
        if(data != null)
        {
            data.IsFavorite = !data.IsFavorite;
        }
        _snackbar.Add("You clicked Favorite", Severity.Info);
    }

    @* when click Share will be show dialog *@
    private async Task Share(int id)
    {
        var data = Datas.FirstOrDefault(x => x.Id == id);
        if (data != null)
        {
            data.IsShared = !data.IsShared;
        }
        // _snackbar.Add("You shared the item", Severity.Success);
    }

    public class Post {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        public string Image { get; set; }
        public bool IsFavorite { get; set; }
        public bool IsShared { get; set; }
    }

    public static List<Post> CreateData(int count)
    {
        var datas = new List<Post>();
        for (int i = 0; i < count; i++)
        {
            datas.Add(new Post
            {
                Id = i,
                Name = "MudBlazor",
                Description = "MudBlazor is an ambitious Material Design component framework for Blazor with an emphasis on ease of use and clear structure. It is perfect for .NET developers who want to rapidly build web applications without having to struggle with CSS and Javascript.",
                Image = "https://via.placeholder.com/300x200",
                IsFavorite = false,
                IsShared = false
            });
        }
        return datas;
    }
}